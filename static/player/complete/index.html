<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Complete Mock: Player view</title>
    <script src="/socket.io/socket.io.js"></script>
    <link rel="stylesheet" type="text/css" href="./../reset.css">
    <style>
        canvas {
            width: 100%;
            height: 100%;
            padding: 0;
            margin: 0;
            display: block;
        }

        .hidden {
            visibility: hidden;
            opacity: 0;
            transition: visibility 0s 0.5s, opacity 0.5s linear;
        }
    </style>
    <script type="module" src="./core.js"></script>
</head>
<body>
<canvas id="canvas"></canvas>
</body>
</html>
<script>
    let iHeight = 0;
    let iAdder = 4;

	function getCtx() {
		return document.getElementById("canvas").getContext("2d");
	}

	function drawSky() {
		const ctx = getCtx();
		ctx.canvas.width = window.innerWidth;
		ctx.canvas.height = window.innerHeight;

		ctx.fillStyle = "#85d6d7";
		ctx.fillRect(0, 0, window.innerWidth, window.innerHeight);
	}

	function drawGrass() {
		const ctx = getCtx();

		const iFloor = window.innerHeight - Math.round(window.innerHeight / 5);
		const iHeight = window.innerHeight - iFloor;

		// grass
		ctx.fillStyle = "#4ed749";
		ctx.fillRect(0, iFloor, window.innerWidth, iHeight);

		ctx.fillStyle = "#40af3b";
		ctx.fillRect(0, iFloor, window.innerWidth, 2);
	}

	function drawCastle() {
		const
            ctx = getCtx(),
            x = window.innerWidth / 2;

		let y = window.innerHeight - Math.round(window.innerHeight / 5) - iHeight;

		ctx.fillStyle = "rgba(156, 128, 78, 0.8)";

		// base
		ctx.fillRect(x - 50, y, 100, iHeight);
		ctx.fillRect(x - 50, y - 10, 20, 10); // left
		ctx.fillRect(x + 30, y - 10, 20, 10); // right
        ctx.fillRect(x - 10, y - 10, 20, 10);

		ctx.fillStyle = "rgba(156, 128, 78, 1)";

		// towers
        y -= 20;
        let height = iHeight + 20;
        ctx.fillRect(x - 80, y, 30, height);

        ctx.fillRect(x + 50, y, 30, height);
    }

    function setHeight() {
		if (iHeight > window.innerHeight - Math.floor(window.innerHeight / 3)) {
			iAdder *= -1;
        } else if (iHeight < 0) {
			iAdder *= -1;
        }
        iHeight += iAdder;
    }

    window.loadingInterval = setInterval(() => {
    	setHeight();
		drawSky();
		drawGrass();
		drawCastle();
    }, (1000 / 60));
</script>